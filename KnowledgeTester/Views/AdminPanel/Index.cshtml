@{
    ViewBag.Title = "Admin Panel";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<div class="menuDiv">
    <span class="menuLink" onclick="menuClick('Categories')">Categories</span> <span
        class="menuLink" onclick="menuClick('Tests')">Tests</span> <span class="menuLink"
            onclick="logout();">Logout</span><label>Admin Panel</label></div>
<div class="roundBordered" style="text-align: right; display: none;" id="categories">
    <span>Categories</span>
    <input type="button" value="Add" onclick="addCategory()" /><input type="button" value="Edit"
        onclick="editCategory()" /><input type="button" value="Delete" onclick="deleteCategory()" />
    <script type="text/javascript">
        function editCategory() {
            document.location.href = '../Category/Index?id=' + getCategoriesSelectedId();
        }
        
        function addCategory() {
            document.location.href = '../Category/Index?id=00000000-0000-0000-0000-000000000000';
        }

        function deleteCategory() {
            
            $.ajax({
                url: '@Url.Action("DeleteCategory", "AdminPanel")',
                data: { id: getCategoriesSelectedId() },
                type: 'POST',
                success: function (data) {
                    alert(data);
                    document.location.href = document.location.href;
                }
            });
           
        }
        
        function getCategoriesSelectedId() {
            var rowId =$("#jqGridCategories").jqGrid('getGridParam','selrow');  
            var rowData = jQuery("#jqGridCategories").getRowData(rowId);
            var colData = rowData['Id'];
            return colData;
        }

        $(document).ready(function () {
            $("#jqGridCategories").jqGrid({
                url: '@Url.Action("GetCategories", "AdminPanel")',
                mtype: "GET",
                datatype: "json",
                colModel: [
                    { label: 'Category Id', name: 'Id', width: 300, sortable: false },
                    { label: 'Category Name', name: 'Name', width: 300,sortable: false },
                    { label: 'Subcategories', name: 'Subcategories', width: 150,sortable: false }
                ],
                viewrecords: true,
                width: 750,
                height: 250,
                rowNum: 20,
                pager: "#jqGridPagerCategories",
                jsonReader: {
                    root: "rows",
                    page: "page",
                    total: "total",
                    records: "records",
                    repeatitems: false,
                    userdata: "userdata"
                },
            });
        });

    </script>
    <table id="jqGridCategories">
    </table>
    <div id="jqGridPagerCategories">
    </div>
</div>
<div class="roundBordered" style="text-align: right;" id="tests">
    <span>Tests</span>
    <input type="button" value="Add" onclick="addCustomTest()" /><input type="button"
        value="Edit" onclick="editTest()" /><input type="button" value="Delete" onclick="deleteTest()" />
    <script type="text/javascript">
        function editTest() {
           document.location.href = '../Test/Index?id=' + getTestSelectedId();
        }
        
        function addCustomTest() {
           document.location.href = '../Test/Index?id=00000000-0000-0000-0000-000000000000';
        }

        function deleteTest() {
            $.ajax({
                url: '@Url.Action("DeleteTest", "AdminPanel")',
                data: { id: getTestSelectedId() },
                type: 'POST',
                success: function (data) {
                    alert(data);
                    document.location.href = document.location.href;
                }
            });
           
        }
        
        function getTestSelectedId() {
            var rowId =$("#jqGridTests").jqGrid('getGridParam','selrow');  
            var rowData = jQuery("#jqGridTests").getRowData(rowId);
            var colData = rowData['Id'];
            return colData;
        }

        $(document).ready(function () {
            $("#jqGridTests").jqGrid({
                url: '@Url.Action("GetTests", "AdminPanel")',
                mtype: "GET",
                datatype: "json",
                colModel: [
                    { label: 'Test Id', name: 'Id', width: 50, key:true, sortable: false },
                    { label: 'Name', name: 'Name', width: 200,sortable: false },
                    { label: 'Subcategory', name: 'Subcategory', width: 200,sortable: false },
                    { label: 'Start Date', name: 'StartDate', width: 100,sortable: false },
                    { label: 'Subscriptions', name: 'Subscriptions', width: 100, sortable: false },
                    { label: 'Duration', name: 'Duration', width: 100,sortable: false }
                ],
                viewrecords: true,
                width: 750,
                height: 250,
                rowNum: 20,
                pager: "#jqGridPagerTests",
                jsonReader: {
                    root: "rows",
                    page: "page",
                    total: "total",
                    records: "records",
                    repeatitems: false,
                    userdata: "userdata"
                },
            });
        });

    </script>
    <table id="jqGridTests">
    </table>
    <div id="jqGridPagerTests">
    </div>
</div>
<script type="text/javascript">
    function menuClick(link) {
        closeAll();
        if (link === 'Categories') {
            $("#categories").show(500);
        }
        if (link === 'Tests') {
            $("#tests").show(500);
        }
    }
    function closeAll() {
        $("#categories").hide(250);
        $("#tests").hide(250);
    }
</script>
